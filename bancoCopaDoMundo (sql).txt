CREATE TABLE PAIS(
	ID_PAIS BIGINT PRIMARY KEY,
	NOME VARCHAR NOT NULL,
	CONTINENTE VARCHAR NOT NULL,
	IDIOMA_MAIN VARCHAR NOT NULL
);

CREATE TABLE ESTADIO(
	ID_ESTADIO BIGINT PRIMARY KEY,
	NOME VARCHAR NOT NULL,
	CAPACIDADE INT NOT NULL,
	ID_PAIS BIGINT NOT NULL,
	FOREIGN KEY (ID_PAIS) REFERENCES PAIS(ID_PAIS)
);

CREATE TABLE MASCOTE(
	ID_MASCOTE BIGINT PRIMARY KEY,
	NOME VARCHAR NOT NULL
);

CREATE TABLE BOLA(
	ID_BOLA BIGINT PRIMARY KEY,
	NOME VARCHAR NOT NULL
);

CREATE TABLE SELECAO(
	ID_SELECAO BIGINT PRIMARY KEY,
	NOME VARCHAR NOT NULL,
	ID_PAIS BIGINT NOT NULL,
	FOREIGN KEY(ID_PAIS) REFERENCES PAIS(ID_PAIS)
);
CREATE INDEX SELNOME_IDX ON SELECAO(NOME); /* criar index da coluna NOME */

CREATE TABLE ATLETA(
	ID_ATLETA BIGINT PRIMARY KEY,
	NOME VARCHAR NOT NULL,
	ID_PAIS_NASCIMENTO BIGINT NOT NULL,
	FOREIGN KEY(ID_PAIS_NASCIMENTO) 
		REFERENCES PAIS(ID_PAIS),
	POSICAO VARCHAR NOT NULL,
	PARTIDAS_JOGADAS BIGINT NOT NULL DEFAULT 0
);

CREATE OR REPLACE FUNCTION JOGOU_PARTIDA()
	RETURNS TRIGGER AS
	$BODY$
	BEGIN
	
		UPDATE ATLETA SET PARTIDAS_JOGADAS = PARTIDAS_JOGADAS + 1
		WHERE ID_ATLETA IN (SELECT ID_ATLETA 
						   FROM SELECAOXATLETA
						   WHERE (ID_SELECAO = NEW.ID_SELECAO0
						   		OR ID_SELECAO = NEW.ID_SELECAO1) 
						   		AND NEW.DATAHORA BETWEEN DATAENTRADA AND COALESCE (DATASAIDA, NEW.DATAHORA));
		RETURN NEW;
	END;
	$BODY$
	LANGUAGE plpgsql;
							
CREATE OR REPLACE TRIGGER PLAYED_GAME
	AFTER INSERT ON PARTIDA FOR EACH ROW
	EXECUTE PROCEDURE JOGOU_PARTIDA();



CREATE TABLE TREINADOR(
	ID_TREINADOR BIGINT PRIMARY KEY,
	NOME VARCHAR NOT NULL,
	ID_PAIS_NASCIMENTO BIGINT NOT NULL,
	FOREIGN KEY(ID_PAIS_NASCIMENTO)
		REFERENCES PAIS(ID_PAIS)
);

CREATE TABLE ARBITRO(
	ID_ARBITRO BIGINT PRIMARY KEY,
	ID_PAIS_NASCIMENTO BIGINT NOT NULL,
	FOREIGN KEY(ID_PAIS_NASCIMENTO) REFERENCES PAIS(ID_PAIS),
	NOME VARCHAR NOT NULL
);

CREATE TABLE EDICAO (
	ID_EDICAO BIGINT PRIMARY KEY,
	ID_MASCOTE BIGINT,
	FOREIGN KEY(ID_MASCOTE) REFERENCES MASCOTE(ID_MASCOTE),
	ID_BOLA BIGINT,
	FOREIGN KEY(ID_BOLA) REFERENCES BOLA(ID_BOLA),
	ANO BIGINT NOT NULL,
	CONSTRAINT EDICAO_VERIFY CHECK(ANO % 4 = 2 AND 
							  ANO != 1942 AND 
							  ANO != 1946 AND
							  ANO >= 1930)
);

CREATE TABLE PARTIDA(
	ID_PARTIDA BIGINT PRIMARY KEY,
	ID_SELECAO0 BIGINT NOT NULL,
	FOREIGN KEY(ID_SELECAO0) REFERENCES SELECAO(ID_SELECAO),
	ID_SELECAO1 BIGINT NOT NULL,
	FOREIGN KEY(ID_SELECAO1) REFERENCES SELECAO(ID_SELECAO),
	ID_EDICAO BIGINT NOT NULL,
	FOREIGN KEY(ID_EDICAO) REFERENCES EDICAO(ID_EDICAO),
	ID_ARBITRO BIGINT NOT NULL,
	FOREIGN KEY(ID_ARBITRO) REFERENCES ARBITRO(ID_ARBITRO),
	ID_ESTADIO BIGINT NOT NULL,
	FOREIGN KEY(ID_ESTADIO) REFERENCES ESTADIO(ID_ESTADIO),
	GOLS_S0 BIGINT NOT NULL,
	GOLS_S1 BIGINT NOT NULL;
	
	DATAHORA TIMESTAMP
);

CREATE TABLE SELECAOXTREINADOR(
	ID_SELECAOXTREINADOR BIGINT PRIMARY KEY,
	ID_SELECAO BIGINT NOT NULL,
	FOREIGN KEY(ID_SELECAO) REFERENCES SELECAO(ID_SELECAO),
	ID_TREINADOR BIGINT NOT NULL,
	FOREIGN KEY(ID_TREINADOR) REFERENCES TREINADOR(ID_TREINADOR),
	DATAENTRADA DATE NOT NULL,
	DATASAIDA DATE
);

CREATE TABLE EDICAOXESTADIOS(
	ID_EDICAOXESTADIOS BIGINT PRIMARY KEY,
	ID_EDICAO BIGINT NOT NULL,
	FOREIGN KEY(ID_EDICAO) REFERENCES EDICAO(ID_EDICAO),
	ID_ESTADIO BIGINT NOT NULL,
	FOREIGN KEY(ID_ESTADIO) REFERENCES ESTADIO(ID_ESTADIO),
	NUMEROPARTIDAS INT NOT NULL
);

CREATE TABLE EDICAOXPAIS(
	ID_EDICAOXPAIS BIGINT PRIMARY KEY,
	ID_EDICAO BIGINT NOT NULL,
	FOREIGN KEY(ID_EDICAO) REFERENCES EDICAO(ID_EDICAO),
	ID_PAIS BIGINT NOT NULL,
	FOREIGN KEY(ID_PAIS) REFERENCES PAIS(ID_PAIS),
	VEZESSEDIADAS INT NOT NULL
);

CREATE TABLE EDICAOXSELECAO(
	ID_EDICAOXSELECAO BIGINT PRIMARY KEY,
	ID_EDICAO BIGINT NOT NULL,
	FOREIGN KEY(ID_EDICAO) REFERENCES EDICAO(ID_EDICAO),
	ID_SELECAO BIGINT NOT NULL,
	FOREIGN KEY(ID_SELECAO) REFERENCES SELECAO(ID_SELECAO),
	PARTICIPACOES INT NOT NULL
);

CREATE TABLE SELECAOXATLETA(
	ID_SELECAOXATLETA BIGINT PRIMARY KEY,
	ID_SELECAO BIGINT NOT NULL,
	FOREIGN KEY(ID_SELECAO) REFERENCES SELECAO(ID_SELECAO),
	ID_ATLETA BIGINT NOT NULL,
	FOREIGN KEY(ID_ATLETA) REFERENCES ATLETA(ID_ATLETA),
	DATAENTRADA DATE NOT NULL,
	DATASAIDA DATE
);


/* INSERTS */
/* PAISES */
INSERT INTO PAIS VALUES(1, 'Brasil', 'América do Sul', 'Português');
INSERT INTO PAIS VALUES(2, 'Argentina', 'América do Sul', 'Castellano');
INSERT INTO PAIS VALUES(3, 'Costa Rica', 'América Central', 'Costarriquenho');
INSERT INTO PAIS VALUES(4, 'Rússia', 'Europa/Ásia', 'Russo');
INSERT INTO PAIS VALUES(5, 'Holanda', 'Europa', 'Holandês');
INSERT INTO PAIS VALUES(6, 'Suíça', 'Europa', 'Suíço');
INSERT INTO PAIS VALUES(7, 'Sérvia', 'Europa', 'Sérvio');
INSERT INTO PAIS VALUES(8, 'México', 'América do Norte', 'Mexicano');
INSERT INTO PAIS VALUES(9, 'Irã', 'Ásia', 'Persa');
INSERT INTO PAIS VALUES(10, 'Alemanha', 'Europa', 'Alemão');
INSERT INTO PAIS VALUES(11, 'França', 'Europa', 'Francês');
INSERT INTO PAIS VALUES(12, 'Boznia-Herzegovina', 'Europa', 'Bósnio');




/* ESTADIOS */
INSERT INTO ESTADIO VALUES(1, 'Estádio de São Petesburgo', 68000, 4);
INSERT INTO ESTADIO VALUES(2, 'Samara Arena', 45000, 4);
INSERT INTO ESTADIO VALUES(3, 'Arena Rostov', 45000, 4);
INSERT INTO ESTADIO VALUES(4, 'Estádio de Kaliningrado', 35000, 4);
INSERT INTO ESTADIO VALUES(5, 'Spartak Stadium', 45500, 4);
INSERT INTO ESTADIO VALUES(6, 'Estádio de Níjni Novgorod', 43500, 4);

/* MASCOTES */
INSERT INTO MASCOTE VALUES(1, 'Fuleco');
INSERT INTO MASCOTE VALUES(2, 'Zabivaka');

/* BOLAS */
INSERT INTO BOLA VALUES(1, 'Brazuca');
INSERT INTO BOLA VALUES(2, 'Telstar 18');

/* SELECOES */
INSERT INTO SELECAO VALUES(1, 'Brasil', 1);
INSERT INTO SELECAO VALUES(2, 'Argentina', 2);
INSERT INTO SELECAO VALUES(3, 'Costa Rica', 3);
INSERT INTO SELECAO VALUES(4, 'Suíça', 6);
INSERT INTO SELECAO VALUES(5, 'Sérvia', 7);

/* ATLETAS */
	/* BRASIL */
INSERT INTO ATLETA VALUES(1, 'Casemiro', 1, 'Meio Campista');
INSERT INTO ATLETA VALUES(2, 'Pelé', 1, 'Atacante');
INSERT INTO ATLETA VALUES(3, 'De Paul', 2, 'Meio Campista');
INSERT INTO ATLETA VALUES(4, 'Batistuta', 2, 'Atacante');
INSERT INTO ATLETA VALUES(5, 'Navas', 3, 'Goleiro');
INSERT INTO ATLETA VALUES(6, 'Alisson', 1, 'Goleiro');
INSERT INTO ATLETA VALUES(7, 'Danilo', 1, 'Defensor');
INSERT INTO ATLETA VALUES(8, 'Thiago', 1, 'Defensor');
INSERT INTO ATLETA VALUES(9, 'Miranda', 1, 'Defensor');
INSERT INTO ATLETA VALUES(10, 'Marcelo', 1, 'Defensor');
INSERT INTO ATLETA VALUES(11, 'Paulinho', 1, 'Meio Campista');
INSERT INTO ATLETA VALUES(12, 'Coutinho', 1, 'Meio Campista');
INSERT INTO ATLETA VALUES(13, 'Willian', 1, 'Atacante');
INSERT INTO ATLETA VALUES(14, 'Jesus', 1, 'Atacante');
INSERT INTO ATLETA VALUES(15, 'Neymar', 1, 'Atacante');

	/* SUIÇA */
INSERT INTO ATLETA VALUES(16, 'Sommer', 6, 'Goleiro');
INSERT INTO ATLETA VALUES(17, 'Rodríguez', 6, 'Defensor');
INSERT INTO ATLETA VALUES(18, 'Akanji', 6, 'Defensor');
INSERT INTO ATLETA VALUES(19, 'Schär', 6, 'Defensor');
INSERT INTO ATLETA VALUES(20, 'Lichtsteiner', 6, 'Defensor');
INSERT INTO ATLETA VALUES(21, 'Xhaka', 6, 'Meio Campista');
INSERT INTO ATLETA VALUES(22, 'Behrami', 6, 'Meio Campista');
INSERT INTO ATLETA VALUES(23, 'Zuber', 6, 'Meio Campista');
INSERT INTO ATLETA VALUES(24, 'Dzemali', 6, 'Meio Campista');
INSERT INTO ATLETA VALUES(25, 'Shaqiri', 6, 'Meio Campista');
INSERT INTO ATLETA VALUES(26, 'Seferovic', 6, 'Atacante');

	/* COSTA RICA */
INSERT INTO ATLETA VALUES(27, 'Duarte', 3, 'Defensor');
INSERT INTO ATLETA VALUES(28, 'Gonzáles', 3, 'Defensor');
INSERT INTO ATLETA VALUES(29, 'Acosta', 3, 'Defensor');
INSERT INTO ATLETA VALUES(30, 'Gamboa', 3, 'Meio Campista');
INSERT INTO ATLETA VALUES(31, 'Borges', 3, 'Meio Campista');
INSERT INTO ATLETA VALUES(32, 'Guzmán', 3, 'Meio Campista');
INSERT INTO ATLETA VALUES(33, 'Oviedo', 3, 'Meio Campista');
INSERT INTO ATLETA VALUES(34, 'Ruiz', 3, 'Meio Campista');
INSERT INTO ATLETA VALUES(35, 'Venegas', 3, 'Meio Campista');
INSERT INTO ATLETA VALUES(36, 'Ureña', 3, 'Atacante');

	/* SERVIA */
INSERT INTO ATLETA VALUES(37, 'Stojkovic', 7, 'Goleiro');
INSERT INTO ATLETA VALUES(38, 'Rukavina', 7, 'Defensor');
INSERT INTO ATLETA VALUES(39, 'Milenkovic', 7, 'Defensor');
INSERT INTO ATLETA VALUES(40, 'Velkovic', 7, 'Defensor');
INSERT INTO ATLETA VALUES(41, 'Kolarov', 7, 'Defensor');
INSERT INTO ATLETA VALUES(42, 'Milinkovic-Savic', 7, 'Meio Campista');
INSERT INTO ATLETA VALUES(43, 'Matic', 7, 'Meio Campista');
INSERT INTO ATLETA VALUES(44, 'Tadic', 7, 'Meio Campista');
INSERT INTO ATLETA VALUES(45, 'Ljajic', 7, 'Meio Campista');
INSERT INTO ATLETA VALUES(46, 'Kostic', 7, 'Meio Campista');
INSERT INTO ATLETA VALUES(47, 'Mitrovic', 7, 'Atacante');

/* TREINADORES */
INSERT INTO TREINADOR VALUES(1, 'Tite', 1);
INSERT INTO TREINADOR VALUES(2, 'Ramírez', 3);
INSERT INTO TREINADOR VALUES(3, 'Petkovic', 12);
INSERT INTO TREINADOR VALUES(4, 'Krstajic', 7);

/* ARBITROS */
INSERT INTO ARBITRO VALUES(1, 5, 'Bjorn Kuipers');
INSERT INTO ARBITRO VALUES(2, 8, 'Cesar Ramos');
INSERT INTO ARBITRO VALUES(3, 9, 'Alireza Faghani');
INSERT INTO ARBITRO VALUES(4, 11, 'Clément Turpin');
INSERT INTO ARBITRO VALUES(5, 10, 'Felix Brych');

/* EDICOES */
INSERT INTO EDICAO VALUES(1, 1, 1, 2014);
INSERT INTO EDICAO VALUES(2, 2, 2, 2018);

/* PARTIDAS */	        /*id|s0|s1|ed|ar|   datahora  |es|g0|g1*/
INSERT INTO PARTIDA VALUES(1, 1, 4, 2, 2, '16-06-2018', 3, 1, 1);
INSERT INTO PARTIDA VALUES(2, 3, 5, 2, 4, '16-06-2018', 2, 0, 1);
INSERT INTO PARTIDA VALUES(3, 5, 4, 2, 5, '22-06-2018', 4, 1, 2);
INSERT INTO PARTIDA VALUES(4, 1, 3, 2, 1, '22-06-2018', 1, 2, 0);
INSERT INTO PARTIDA VALUES(5, 5, 1, 2, 3, '27-06-2018', 5, 0, 2);
INSERT INTO PARTIDA VALUES(6, 4, 3, 2, 4, '27-06-2018', 6, 2, 2);

/* SELECAO X TREINADOR */
INSERT INTO SELECAOXTREINADOR VALUES(1, 1, 1, '20-06-2016');
INSERT INTO SELECAOXTREINADOR VALUES(2, 3, 2, '18-08-2015', '05-07-2018');
INSERT INTO SELECAOXTREINADOR VALUES(3, 4, 3, '01-08-2014', '27-07-2021');
INSERT INTO SELECAOXTREINADOR VALUES(4, 5, 4, '29-01-2018', '13-06-2019');

/* EDICAO X ESTADIOS */
INSERT INTO EDICAOXESTADIOS VALUES(1, 2, 1, 1);
INSERT INTO EDICAOXESTADIOS VALUES(2, 2, 2, 1);
INSERT INTO EDICAOXESTADIOS VALUES(3, 2, 3, 1);
INSERT INTO EDICAOXESTADIOS VALUES(4, 2, 4, 1);
INSERT INTO EDICAOXESTADIOS VALUES(5, 2, 5, 1);
INSERT INTO EDICAOXESTADIOS VALUES(6, 2, 6, 1);

/* EDICAO X PAIS */
INSERT INTO EDICAOXPAIS VALUES(1, 2, 4, 1);

/* EDICAO X SELECAO */
INSERT INTO EDICAOXSELECAO VALUES(1, 2, 1, 21);
INSERT INTO EDICAOXSELECAO VALUES(2, 2, 3, 5);
INSERT INTO EDICAOXSELECAO VALUES(3, 2, 4, 11);
INSERT INTO EDICAOXSELECAO VALUES(4, 2, 5, 12);

/* SELECAO X ATLETA */
	/* BRASIL ATLETAS */
INSERT INTO SELECAOXATLETA VALUES(1, 1, 1, '05-05-2016');
INSERT INTO SELECAOXATLETA VALUES(6, 1, 6, '13-08-2015');
INSERT INTO SELECAOXATLETA VALUES(7, 1, 7, '15-09-2017');
INSERT INTO SELECAOXATLETA VALUES(8, 1, 8, '23-05-2008');
INSERT INTO SELECAOXATLETA VALUES(9, 1, 9, '21-03-2017', '09-03-2019');
INSERT INTO SELECAOXATLETA VALUES(10, 1, 10, '15-02-2011', '09-03-2019');
INSERT INTO SELECAOXATLETA VALUES(11, 1, 11, '03-09-2012', '09-03-2019');
INSERT INTO SELECAOXATLETA VALUES(12, 1, 12, '11-08-2015');
INSERT INTO SELECAOXATLETA VALUES(13, 1, 13, '25-06-2013', '09-03-2019');
INSERT INTO SELECAOXATLETA VALUES(14, 1, 14, '08-08-2016');
INSERT INTO SELECAOXATLETA VALUES(15, 1, 15, '12-01-2011');
	/* COSTA RICA ATLETAS */
INSERT INTO SELECAOXATLETA VALUES(5, 3, 5, '11-10-2008');
INSERT INTO SELECAOXATLETA VALUES(16, 3, 27, '10-08-2013');
INSERT INTO SELECAOXATLETA VALUES(17, 3, 28, '10-08-2013');
INSERT INTO SELECAOXATLETA VALUES(18, 3, 29, '10-08-2013');
INSERT INTO SELECAOXATLETA VALUES(19, 3, 30, '10-08-2013');
INSERT INTO SELECAOXATLETA VALUES(20, 3, 31, '10-08-2013');
INSERT INTO SELECAOXATLETA VALUES(21, 3, 32, '21-10-2017');
INSERT INTO SELECAOXATLETA VALUES(22, 3, 33, '21-10-2017');
INSERT INTO SELECAOXATLETA VALUES(23, 3, 34, '10-08-2013');
INSERT INTO SELECAOXATLETA VALUES(24, 3, 35, '21-10-2017');
INSERT INTO SELECAOXATLETA VALUES(25, 3, 36, '10-08-2013');
	/* SUIÇA ATLETAS */
INSERT INTO SELECAOXATLETA VALUES(26, 4, 16, '10-08-2013');
INSERT INTO SELECAOXATLETA VALUES(27, 4, 17, '10-08-2013');
INSERT INTO SELECAOXATLETA VALUES(28, 4, 18, '21-10-2017');
INSERT INTO SELECAOXATLETA VALUES(29, 4, 19, '10-08-2013');
INSERT INTO SELECAOXATLETA VALUES(30, 4, 20, '10-08-2013');
INSERT INTO SELECAOXATLETA VALUES(31, 4, 21, '10-08-2013');
INSERT INTO SELECAOXATLETA VALUES(32, 4, 22, '10-08-2013');
INSERT INTO SELECAOXATLETA VALUES(33, 4, 23, '10-08-2013');
INSERT INTO SELECAOXATLETA VALUES(34, 4, 24, '10-08-2013');
INSERT INTO SELECAOXATLETA VALUES(35, 4, 25, '10-08-2013');
INSERT INTO SELECAOXATLETA VALUES(36, 4, 26, '10-08-2013');
	/* SERVIA ATLETAS */
INSERT INTO SELECAOXATLETA VALUES(37, 5, 37, '21-10-2017');
INSERT INTO SELECAOXATLETA VALUES(38, 5, 38, '21-10-2017');
INSERT INTO SELECAOXATLETA VALUES(39, 5, 39, '21-10-2017');
INSERT INTO SELECAOXATLETA VALUES(40, 5, 40, '21-10-2017');
INSERT INTO SELECAOXATLETA VALUES(41, 5, 41, '21-10-2017');
INSERT INTO SELECAOXATLETA VALUES(42, 5, 42, '21-10-2017');
INSERT INTO SELECAOXATLETA VALUES(43, 5, 43, '21-10-2017');
INSERT INTO SELECAOXATLETA VALUES(44, 5, 44, '21-10-2017');
INSERT INTO SELECAOXATLETA VALUES(45, 5, 45, '21-10-2017');
INSERT INTO SELECAOXATLETA VALUES(46, 5, 46, '21-10-2017');
INSERT INTO SELECAOXATLETA VALUES(47, 5, 47, '21-10-2017');


/* CONSULTAS */
/*1*/
SELECT NOME AS "Estádios onde a seleção brasileira jogou" 
	FROM ESTADIO 
	WHERE ID_ESTADIO IN (SELECT ID_ESTADIO 
						 FROM PARTIDA 
						 WHERE ID_SELECAO0 = 1
							OR ID_SELECAO1 = 1);

/*2*/						
SELECT NOME AS "Jogadores brasileiros que não participaram das copas registradas"
	FROM ATLETA 
	WHERE PARTIDAS_JOGADAS = 0 AND ID_PAIS_NASCIMENTO = 1;

/*3*/
SELECT NOME AS "Atletas que participaram da copa de 18 apenas" 
	FROM ATLETA
	WHERE ID_ATLETA IN (SELECT ID_ATLETA 
					   	FROM SELECAOXATLETA
					   	WHERE DATAENTRADA >= '31-12-2014'::date
					   		AND (DATASAIDA IS NULL
								OR DATASAIDA >= '31-12-2018'::date))

/*4*/
SELECT ATLETA.NOME AS "Atleta", PAIS.NOME AS "País de Origem"
	FROM ATLETA
			INNER JOIN PAIS
			ON ATLETA.ID_PAIS_NASCIMENTO = PAIS.ID_PAIS

/*5*/
SELECT BOLA.NOME AS "Nome da Bola", PAIS.NOME AS "País em que foi usada"
	FROM BOLA 
		INNER JOIN PAIS
			ON PAIS.ID_PAIS IN (SELECT ID_PAIS 
								  	FROM EDICAOXPAIS
								  	WHERE EDICAOXPAIS.ID_EDICAO IN (SELECT ID_EDICAO 
																   	FROM EDICAO
																   	WHERE EDICAO.ID_BOLA = BOLA.ID_BOLA))
																	
/*6*/
SELECT MASCOTE.NOME AS "Mascote", EDICAO.ANO AS "Ano em que foi mascote"
	FROM MASCOTE 
		INNER JOIN EDICAO
		ON MASCOTE.ID_MASCOTE = EDICAO.ID_MASCOTE
		
/*7*/
SELECT SELECAO.NOME AS "Vencedor de Sérvia x Suíça"
	FROM SELECAO	
		INNER JOIN PARTIDA A
		ON SELECAO.ID_SELECAO = A.ID_SELECAO0
		INNER JOIN PARTIDA B
		ON SELECAO.ID_SELECAO = B.ID_SELECAO1
			WHERE (A.GOLS_S0 > A.GOLS_S1 OR B.GOLS_S0 < B.GOLS_S1) 
				AND (NOT(A.GOLS_S0 > A.GOLS_S1 OR B.GOLS_S0 < B.GOLS_S1))
				AND A.ID_SELECAO0 = 5 AND A.ID_SELECAO1 = 4
				OR B.ID_SELECAO0 = 5 AND B.ID_SELECAO1 = 4				

/*8*/
SELECT TREINADOR.NOME AS "Treinador", SELECAO.NOME AS "Seleção treinada"
	FROM TREINADOR 
		INNER JOIN SELECAO 
		ON SELECAO.ID_SELECAO IN (SELECT ID_SELECAO 
								 	FROM SELECAOXTREINADOR
								 	WHERE SELECAOXTREINADOR.ID_TREINADOR = TREINADOR.ID_TREINADOR)

/*9*/
SELECT SELECAO.NOME AS "Seleção defendida pelo jogador Yann Sommer"
	FROM SELECAO
		WHERE SELECAO.ID_SELECAO IN (SELECT ID_SELECAO
										FROM SELECAOXATLETA
										WHERE SELECAOXATLETA.ID_ATLETA IN (SELECT ID_ATLETA
																					FROM ATLETA
																					WHERE ATLETA.NOME = 'Sommer'))
																					
/*10*/
SELECT A.NOME AS "CASA", PARTIDA.GOLS_S0 AS "Gols casa",
	   B.NOME AS "VISITANTE", PARTIDA.GOLS_S1 AS "Gols visitante"
	   FROM PARTIDA
	   		INNER JOIN SELECAO A
			ON A.ID_SELECAO = PARTIDA.ID_SELECAO0
			INNER JOIN SELECAO B
			ON B.ID_SELECAO = PARTIDA.ID_SELECAO1
			
			AND
			   PARTIDA.ID_SELECAO1 IN (SELECT ID_SELECAO FROM SELECAO)
			WHERE PARTIDA.ID_SELECAO0 != PARTIDA.ID_SELECAO1


/* EXIBIR INDEXs CRIADOS */
SELECT
    tablename,
    indexname,
    indexdef
FROM
    pg_indexes
WHERE
    schemaname = 'public'
ORDER BY
    tablename,
    indexname;


/* 1 */
/* EXIBIR LISTA DE TRIGGERS */
SELECT  event_object_table AS table_name ,trigger_name         
FROM information_schema.triggers  
GROUP BY table_name , trigger_name 
ORDER BY table_name ,trigger_name 
